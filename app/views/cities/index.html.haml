%h2 All Cities
%table
  %thead
    %tr
      %th{:scope => "col"} Name
      %th{:scope => "col"} Country
      %th{:scope => "col"} Buildings
      %th{:scope => "col"}
      %th{:scope => "col"}
      %th{:scope => "col"}
  %tbody
    - @cities.each do |city|
      %tr
        %td= city.name
        %td= city.country
        %td.buildings
          - city.buildings.each do |building|
            = link_to building.name, building_path(building)
            %br
        %td= link_to 'Details', city
        %td= link_to 'Edit', edit_city_path(city)
        %td= link_to 'x', city, method: :delete, data: { confirm: "Permanently delete #{city.name} and all associated buildings?" }
%br
= link_to 'Add New City', new_city_path